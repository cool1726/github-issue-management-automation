---
alwaysApply: true
---

# 프로젝트 구조 및 파일 역할

## 프로젝트 구조
```
{project_root}/
├── pyproject.toml       # 프로젝트 설정 및 의존성 관리 (uv 사용)
├── README.md
├── src/
│   └── {project_name}/
│       ├── __init__.py
│       ├── crew.py              # Crew 클래스 정의 (메인 로직)
│       ├── main.py              # 실행 진입점
│       ├── config/
│       │   ├── agents.yaml      # Agent 설정 파일
│       │   └── tasks.yaml       # Task 설정 파일
│       └── tools/
│           ├── __init__.py
│           └── custom_tool.py   # 커스텀 툴 정의
```

## 파일 역할

### crew.py
- `@CrewBase` 데코레이터로 CrewAI 프로젝트 베이스 클래스 상속
- Agent, Task, Crew 메서드 정의
- 각 Agent와 Task의 구체적인 설정 및 통합 로직 포함

### main.py
- 프로젝트 실행 진입점
- `run()`, `train()`, `replay()`, `test()` 함수 제공
- 입력 변수(`inputs`) 정의 및 Crew 실행

#### main.py 구조
`main.py`는 다음과 같은 구조를 가져야 합니다:

```python
import sys

def run():
    """Crew를 실행합니다."""
    # Crew 실행 로직
    pass

def train():
    """Crew를 학습시킵니다."""
    # Crew 학습 로직
    pass

def replay():
    """이전 실행을 재생합니다."""
    # Crew 재생 로직
    pass

def test():
    """Crew를 테스트합니다."""
    # Crew 테스트 로직
    pass

if __name__ == "__main__":
    if len(sys.argv) < 2:
        print("Usage: main.py <command> [<args>]")
        sys.exit(1)
    
    command = sys.argv[1]
    
    if command == "run":
        run()
    elif command == "train":
        train()
    elif command == "replay":
        replay()
    elif command == "test":
        test()
    else:
        print(f"Unknown command: {command}")
        sys.exit(1)
```

**사용법**:
- `python main.py run`: Crew 실행
- `python main.py train`: Crew 학습
- `python main.py replay`: 이전 실행 재생
- `python main.py test`: Crew 테스트

### config/agents.yaml
- 모든 Agent의 설정 정의
- 각 Agent의 `role`, `goal`, `backstory` 포함
- 템플릿 변수 사용 가능

### config/tasks.yaml
- 모든 Task의 설정 정의
- 각 Task의 `description`, `expected_output`, `agent`, `context` 포함
- Task 간 의존성 정의

### tools/custom_tool.py
- 커스텀 툴 클래스 정의
- `BaseTool`을 상속받은 툴 구현
- Agent에서 사용할 수 있는 커스텀 기능 제공

### pyproject.toml
- 프로젝트 메타데이터 및 의존성 관리
- **uv**를 사용한 패키지 관리
- PEP 621 표준 형식 사용
- `[project.scripts]` 섹션에 실행 가능한 스크립트 정의
- `[tool.crewai]` 섹션에 CrewAI 프로젝트 타입 설정

#### pyproject.toml 구조 예시
```toml
[project]
name = "project-name"
version = "0.1.0"
requires-python = ">=3.10,<3.14"
dependencies = [
    "crewai[azure-ai-inference,tools]==1.4.1",
]

[project.scripts]
run_crew = "project_name.main:run"
train = "project_name.main:train"
replay = "project_name.main:replay"
test = "project_name.main:test"

[build-system]
requires = ["hatchling"]
build-backend = "hatchling.build"

[tool.crewai]
type = "crew"
```

#### uv 패키지 관리
- **설치**: `uv sync` (의존성 설치)
- **패키지 추가**: `uv add <package-name>`
- **개발 의존성 포함**: `uv sync --extra dev`
- **스크립트 실행**: 설치 후 `run_crew`, `train` 등 직접 실행 가능

## 주의사항
- Agent Studio에서 export한 코드이므로, 구조 변경 시 주의 필요
- 각 파일의 역할을 명확히 구분하여 유지보수성 확보
- `pyproject.toml`의 `[project.scripts]` 경로는 실제 패키지 구조와 일치해야 함
