---
alwaysApply: true
---

# 커스텀 툴 개발 가이드

## 툴 구조

### 기본 클래스
- `BaseTool`을 상속받아 커스텀 툴 생성
- `crewai.tools` 모듈에서 `BaseTool` import

### 필수 필드
- `name`: 툴의 이름 (문자열)
- `description`: 툴의 설명 (Agent가 사용 시 참고)
- `args_schema`: 입력 스키마 (Pydantic `BaseModel` 타입)

### 필수 메서드
- `_run`: 실제 로직 구현 메서드
  - 입력 스키마에 정의된 파라미터를 받음
  - 문자열 또는 딕셔너리 반환

## 입력 스키마 정의

### Pydantic BaseModel 사용
- `pydantic.BaseModel`을 상속받은 입력 스키마 클래스 정의
- `Field`를 사용하여 필드 설명 및 검증 규칙 정의

### 예시
```python
from pydantic import BaseModel, Field

class MyCustomToolInput(BaseModel):
    """Input schema for MyCustomTool."""
    argument: str = Field(..., description="Description of the argument.")
    optional_param: int = Field(default=10, description="Optional parameter.")
```

## 툴 클래스 구현

### 기본 패턴
```python
from crewai.tools import BaseTool
from typing import Type
from pydantic import BaseModel, Field

class MyCustomToolInput(BaseModel):
    """Input schema for MyCustomTool."""
    argument: str = Field(..., description="인자 설명")

class MyCustomTool(BaseTool):
    name: str = "툴 이름"
    description: str = (
        "Clear description for what this tool is useful for, "
        "your agent will need this information to use it."
    )
    args_schema: Type[BaseModel] = MyCustomToolInput

    def _run(self, argument: str) -> str:
        # 구현 로직
        return "this is an example of a tool output, ignore it and move along."
```

## Agent에 툴 추가

### tools 리스트에 추가
- Agent 정의 시 `tools` 파라미터에 툴 인스턴스 리스트 전달
- 예시:
```python
@agent
def researcher(self) -> Agent:
    return Agent(
        config=self.agents_config["researcher"],
        tools=[MyCustomTool()],
        # ... 기타 설정
    )
```

## 확장 시 고려사항

### 새로운 툴 추가
1. `tools/custom_tool.py` 또는 새 파일에 툴 클래스 정의
2. 입력 스키마 클래스 정의 (`*Input` 네이밍 권장)
3. `BaseTool`을 상속받은 툴 클래스 구현
4. `name`, `description`, `args_schema`, `_run` 메서드 구현
5. Agent의 `tools` 리스트에 추가

### 툴 개발 가이드라인
- `description`은 Agent가 툴을 선택할 때 사용되므로 명확하고 구체적으로 작성
- `args_schema`의 필드 설명은 Agent가 올바른 값을 전달할 수 있도록 상세히 작성
- `_run` 메서드는 에러 처리를 포함하여 안정적으로 구현
- 반환값은 문자열 또는 딕셔너리 형식으로 일관되게 유지
